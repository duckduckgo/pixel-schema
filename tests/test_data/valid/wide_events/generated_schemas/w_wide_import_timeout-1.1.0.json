{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Fires when an import operation takes longer than expected and times out.",
  "$comment": "{\"owners\":[\"tester\"]}",
  "type": "object",
  "required": ["meta", "global", "feature", "app", "context"],
  "additionalProperties": false,
  "properties": {
    "meta": {
      "type": "object",
      "required": ["type", "version"],
      "additionalProperties": false,
      "properties": {
        "type": { "const": "w_wide_import_timeout" },
        "version": { "const": "1.1.0" }
      }
    },
    "app": {
      "type": "object",
      "required": ["name", "version"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the application",
          "enum": ["Windows"]
        },
        "version": {
          "type": "string",
          "description": "The version of the application",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        }
      }
    },
    "global": {
      "type": "object",
      "required": ["platform", "type", "sample_rate"],
      "additionalProperties": false,
      "properties": {
        "platform": {
          "type": "string",
          "description": "The platform the app is running on",
          "enum": ["Windows"]
        },
        "type": {
          "type": "string",
          "description": "The type of application",
          "enum": ["app"]
        },
        "sample_rate": {
          "type": "number",
          "description": "Sample rate for this event"
        }
      }
    },
    "feature": {
      "type": "object",
      "required": ["name", "status", "data"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "The feature name for this event",
          "enum": ["browser-import"]
        },
        "status": {
          "type": "string",
          "description": "The overall status of the operation",
          "enum": ["FAILURE"]
        },
        "data": {
          "type": "object",
          "required": ["ext"],
          "additionalProperties": false,
          "properties": {
            "ext": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "import_from": {
                  "type": "string",
                  "description": "The source of the import that timed out",
                  "enum": [
                    "Google Chrome",
                    "Microsoft Edge",
                    "Mozilla Firefox",
                    "Brave",
                    "Vivaldi",
                    "Chromium",
                    "Bitwarden",
                    "CSV Logins File",
                    "HTML Bookmarks File",
                    "LastPass",
                    "1Password",
                    "1Password 7"
                  ]
                },
                "total_items_bucketed": {
                  "type": "integer",
                  "description": "Number of items that were being imported when the timeout occurred, bucketed to preserve privacy",
                  "enum": [1, 5, 10, 20, 50, 100, 500, 1000]
                }
              }
            }
          }
        }
      }
    },
    "context": {
      "type": "object",
      "required": ["name"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "Context name for the event",
          "enum": ["onboarding", "settings"]
        }
      }
    }
  }
}
