{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "prop_schema.json",
    "type": "object",
    "additionalProperties": {
        "$ref": "#/$defs/propertyDefinition"
    },
    "$defs": {
        "stringValueProperty": {
            "type": "object",
            "description": "A string property with a single value (no enum).",
            "required": ["type", "description"],
            "not": { "required": ["enum"] },
            "properties": {
                "type": { "const": "string" },
                "description": { "type": "string" },
                "pattern": { "type": "string" },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "stringValueWithPatternProperty": {
            "type": "object",
            "description": "A string property with a required pattern (no enum).",
            "required": ["type", "description", "pattern"],
            "not": { "required": ["enum"] },
            "properties": {
                "type": { "const": "string" },
                "description": { "type": "string" },
                "pattern": { "type": "string" },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "stringEnumProperty": {
            "type": "object",
            "description": "A string property constrained to enum values.",
            "required": ["type", "description", "enum"],
            "properties": {
                "type": { "const": "string" },
                "description": { "type": "string" },
                "enum": { "type": "array", "items": { "type": "string" }, "minItems": 1 },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "numberValueProperty": {
            "type": "object",
            "description": "A number property with a single value (no enum).",
            "required": ["type", "description"],
            "not": { "required": ["enum"] },
            "properties": {
                "type": { "const": "number" },
                "description": { "type": "string" },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "numberEnumProperty": {
            "type": "object",
            "description": "A number property constrained to enum values.",
            "required": ["type", "description", "enum"],
            "properties": {
                "type": { "const": "number" },
                "description": { "type": "string" },
                "enum": { "type": "array", "items": { "type": "number" }, "minItems": 1 },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "integerValueProperty": {
            "type": "object",
            "description": "An integer property with a single value (no enum).",
            "required": ["type", "description"],
            "not": { "required": ["enum"] },
            "properties": {
                "type": { "const": "integer" },
                "description": { "type": "string" },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "integerEnumProperty": {
            "type": "object",
            "description": "An integer property constrained to enum values (e.g., bucketed values).",
            "required": ["type", "description", "enum"],
            "properties": {
                "type": { "const": "integer" },
                "description": { "type": "string" },
                "enum": { "type": "array", "items": { "type": "integer" }, "minItems": 1 },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "booleanProperty": {
            "type": "object",
            "description": "A boolean property.",
            "required": ["type", "description"],
            "properties": {
                "type": { "const": "boolean" },
                "description": { "type": "string" },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "objectProperty": {
            "type": "object",
            "description": "A nested object property with its own properties.",
            "required": ["type", "description", "properties"],
            "properties": {
                "type": { "const": "object" },
                "description": { "type": "string" },
                "properties": {
                    "type": "object",
                    "additionalProperties": { "$ref": "#/$defs/propertyDefinition" }
                },
                "examples": { "type": "array" }
            },
            "additionalProperties": true
        },
        "propertyDefinition": {
            "description": "A property definition for custom data. Must be a value type (no enum) OR an enum type (with enum array).",
            "oneOf": [
                { "$ref": "#/$defs/stringValueProperty" },
                { "$ref": "#/$defs/stringEnumProperty" },
                { "$ref": "#/$defs/numberValueProperty" },
                { "$ref": "#/$defs/numberEnumProperty" },
                { "$ref": "#/$defs/integerValueProperty" },
                { "$ref": "#/$defs/integerEnumProperty" },
                { "$ref": "#/$defs/booleanProperty" },
                { "$ref": "#/$defs/objectProperty" }
            ]
        }
    }
}
